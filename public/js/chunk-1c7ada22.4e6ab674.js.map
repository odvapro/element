{"version":3,"sources":["webpack:///./src/components/fields/em_file/Field.vue","webpack:///src/components/fields/em_file/Field.vue","webpack:///./src/components/fields/em_file/Field.vue?9705","webpack:///./src/components/fields/em_file/Field.vue?aab6","webpack:///./src/components/fields/em_file/Field.vue?4f4c","webpack:///./node_modules/core-js/modules/es6.string.small.js"],"names":["render","_vm","this","_c","_self","staticClass","on","$event","openPopup","_l","localValue","item","noShow","_e","type","attrs","sizes","small","path","countFiels","_v","_s","$t","showPopup","directives","name","rawName","value","closePopup","expression","index","removeFile","openSubPopup","showSubPopup","closeSubPopup","tabs","class","active","setActiveTab","isUploading","percentUploadOfProgress","style","width","cancelUpload","activeTab","ref","uploadFile","link","domProps","target","composing","staticRenderFns","props","data","cancelToken","computed","count","fieldCode","fieldSettings","tableCode","methods","_uploadFile","_asyncToGenerator","regeneratorRuntime","mark","_callee","formData","_iterator","_step","file","result","_iterator2","_step2","newFile","_this","wrap","_context","prev","next","$set","FormData","append","$refs","emFile","length","abrupt","_createForOfIteratorHelper","files","s","n","done","concat","err","e","f","view","axios","CancelToken","source","setUploadProgressStatus","method","headers","url","token","onUploadProgress","updateUploadProgress","loaded","total","catch","__proto__","__CANCEL__","success","message","sent","ElMessage","error","push","sendValue","stop","_x","apply","arguments","clearUploadProgress","_ref","_ref$percent","percent","_ref$loaded","_ref$total","Math","floor","_cancelUpload","_callee2","_context2","cancel","_removeFile","_callee3","_context3","new","$delete","_x2","newValue","$emit","settings","setPreviewForImage","match","setPreview","tab","_step3","_iterator3","watch","created","fieldValue","component","createHTML"],"mappings":"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","file":"js/chunk-1c7ada22.4e6ab674.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"em-file-item-col\",on:{\"click\":function($event){return _vm.openPopup()}}},[_vm._l((_vm.localValue),function(item){return (!item.noShow)?_c('div',{staticClass:\"em-file-item-wrapper\"},[(item.type == 'image')?_c('img',{attrs:{\"src\":item.sizes.small.path,\"alt\":\"\"}}):_c('svg',[_c('use',{attrs:{\"xlink:href\":\"#attachment\"}})])]):_vm._e()}),(_vm.countFiels == 0)?[_c('span',{staticClass:\"el-empty\"},[_vm._v(_vm._s(_vm.$t('empty')))])]:_vm._e(),(_vm.showPopup)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closePopup),expression:\"closePopup\"}],staticClass:\"em-file__edit\"},[_vm._l((_vm.localValue),function(item,index){return (!item.noShow)?_c('div',{staticClass:\"em-file__edit-item\"},[(item.type == 'image')?_c('img',{staticClass:\"em-file__edit-attach\",attrs:{\"src\":item.sizes.small.path,\"alt\":\"\"}}):_c('svg',{staticClass:\"em-file__edit-attach\"},[_c('use',{attrs:{\"xlink:href\":\"#attachment\"}})]),_c('a',{attrs:{\"href\":item.path,\"target\":\"_blank\"}},[_vm._v(\"Download\")]),_c('a',{attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":function($event){return _vm.removeFile(index)}}},[_vm._v(_vm._s(_vm.$t('remove')))])]):_vm._e()}),(_vm.countFiels == 0)?[_c('div',{staticClass:\"em-file__empty-pop\"},[_c('span',{staticClass:\"el-empty\"},[_vm._v(_vm._s(_vm.$t('fieldEmFile.no_files')))])])]:_vm._e(),_c('button',{staticClass:\"el-gbtn\",on:{\"click\":function($event){return _vm.openSubPopup()}}},[_vm._v(_vm._s(_vm.$t('fieldEmFile.add_file')))]),(_vm.showSubPopup)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeSubPopup),expression:\"closeSubPopup\"}],staticClass:\"em-file__upload-popup\"},[_c('div',{staticClass:\"em-file__upload-tab-wrapper\"},[_c('div',{staticClass:\"em-file__upload-tabs-head\"},_vm._l((_vm.tabs),function(item){return _c('div',{staticClass:\"em-file__upload-tab-item\",class:{active: item.active},on:{\"click\":function($event){return _vm.setActiveTab(item)}}},[_vm._v(_vm._s(item.name))])}),0),_c('div',{staticClass:\"em-file__upload-tabs-content-wrapper\"},[(_vm.isUploading)?_c('div',{staticClass:\"em-file__progress-tab\"},[_c('div',{staticClass:\"em-file__progressbar\"},[_c('div',{staticClass:\"em-file__progressbar-text\"},[_vm._v(_vm._s(_vm.percentUploadOfProgress)+\"%\")]),_c('div',{staticClass:\"em-file__progressbar-done\",style:({ width: _vm.percentUploadOfProgress+'%' })})]),_c('button',{staticClass:\"el-gbtn\",on:{\"click\":_vm.cancelUpload}},[_vm._v(_vm._s(_vm.$t('cancel')))])]):[(_vm.activeTab == _vm.$t('upload'))?_c('div',{staticClass:\"em-file__file-tab\"},[_c('input',{ref:\"emFile\",staticClass:\"em-file\",attrs:{\"type\":\"file\",\"multiple\":\"true\",\"name\":\"file\",\"id\":\"file\"},on:{\"change\":function($event){return _vm.uploadFile('file')}}}),_c('label',{staticClass:\"el-btn\",attrs:{\"for\":\"file\"}},[_vm._v(_vm._s(_vm.$t('fieldEmFile.choose_file')))])]):_vm._e(),(_vm.activeTab == _vm.$t('upload_by_link'))?_c('div',{staticClass:\"em-file__link-tab\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.link),expression:\"link\"}],staticClass:\"el-inp em-file__embed-input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.$t('paste_link')},domProps:{\"value\":(_vm.link)},on:{\"change\":function($event){return _vm.uploadFile('link')},\"input\":function($event){if($event.target.composing)return;_vm.link=$event.target.value}}}),_c('button',{staticClass:\"el-btn\",on:{\"click\":function($event){return _vm.uploadFile('link')}}},[_vm._v(_vm._s(_vm.$t('fieldEmFile.embed_link')))])]):_vm._e()]],2)])]):_vm._e()],2):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"em-file-item-col\" @click=\"openPopup()\">\n\t\t<div\n\t\t\tclass=\"em-file-item-wrapper\"\n\t\t\tv-for=\"item in localValue\"\n\t\t\tv-if=\"!item.noShow\"\n\t\t>\n\t\t\t<img v-if=\"item.type == 'image'\" :src=\"item.sizes.small.path\" alt=\"\"/>\n\t\t\t<svg v-else>\n\t\t\t\t<use xlink:href=\"#attachment\"></use>\n\t\t\t</svg>\n\t\t</div>\n\t\t<template v-if=\"countFiels == 0\">\n\t\t\t<span class=\"el-empty\">{{$t('empty')}}</span>\n\t\t</template>\n\t\t<div class=\"em-file__edit\" v-if=\"showPopup\" v-click-outside=\"closePopup\">\n\t\t\t<div\n\t\t\t\tclass=\"em-file__edit-item\"\n\t\t\t\tv-for=\"(item, index) in localValue\"\n\t\t\t\tv-if=\"!item.noShow\"\n\t\t\t>\n\t\t\t\t<img v-if=\"item.type == 'image'\" class=\"em-file__edit-attach\" :src=\"item.sizes.small.path\" alt=\"\"/>\n\t\t\t\t<svg v-else class=\"em-file__edit-attach\">\n\t\t\t\t\t<use xlink:href=\"#attachment\"></use>\n\t\t\t\t</svg>\n\t\t\t\t<a :href=\"item.path\" target=\"_blank\">Download</a>\n\t\t\t\t<a href=\"javascript:void(0);\" @click=\"removeFile(index)\">{{$t('remove')}}</a>\n\t\t\t</div>\n\t\t\t<template v-if=\"countFiels == 0\">\n\t\t\t\t<div class=\"em-file__empty-pop\">\n\t\t\t\t\t<span class=\"el-empty\">{{$t('fieldEmFile.no_files')}}</span>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<button class=\"el-gbtn\" @click=\"openSubPopup()\">{{$t('fieldEmFile.add_file')}}</button>\n\t\t\t<div class=\"em-file__upload-popup\"\n\t\t\t\tv-if=\"showSubPopup\"\n\t\t\t\tv-click-outside=\"closeSubPopup\"\n\t\t\t>\n\t\t\t\t<div class=\"em-file__upload-tab-wrapper\">\n\t\t\t\t\t<div class=\"em-file__upload-tabs-head\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"em-file__upload-tab-item\"\n\t\t\t\t\t\t\t@click=\"setActiveTab(item)\"\n\t\t\t\t\t\t\tv-for=\"item in tabs\"\n\t\t\t\t\t\t\t:class=\"{active: item.active}\"\n\t\t\t\t\t\t>{{item.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"em-file__upload-tabs-content-wrapper\">\n\t\t\t\t\t\t<div class=\"em-file__progress-tab\" v-if=\"isUploading\">\n\t\t\t\t\t\t\t<div class=\"em-file__progressbar\">\n\t\t\t\t\t\t\t\t<div class=\"em-file__progressbar-text\">{{ percentUploadOfProgress }}%</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"em-file__progressbar-done\"\n\t\t\t\t\t\t\t\t\t:style=\"{ width: percentUploadOfProgress+'%' }\"\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button @click=cancelUpload class=\"el-gbtn\">{{ $t('cancel') }}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"em-file__file-tab\" v-if=\"activeTab == $t('upload')\">\n\t\t\t\t\t\t\t\t<input type=\"file\" multiple=\"true\" name=\"file\" ref=\"emFile\" @change=\"uploadFile('file')\" id=\"file\" class=\"em-file\" />\n\t\t\t\t\t\t\t\t<label class=\"el-btn\" for=\"file\">{{$t('fieldEmFile.choose_file')}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"em-file__link-tab\"\n\t\t\t\t\t\t\t\tv-if=\"activeTab == $t('upload_by_link')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclass=\"el-inp em-file__embed-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$t('paste_link')\"\n\t\t\t\t\t\t\t\t\tv-model=\"link\"\n\t\t\t\t\t\t\t\t\t@change=\"uploadFile('link')\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button @click=\"uploadFile('link')\" class=\"el-btn\">{{$t('fieldEmFile.embed_link')}}</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\n\timport axios from 'axios';\n\n\texport default\n\t{\n\t\tprops: ['fieldValue','fieldSettings','mode', 'view'],\n\t\t/**\n\t\t * Глобальные переменные странциы\n\t\t */\n\t\tdata()\n\t\t{\n\t\t\treturn {\n\t\t\t\tlocalValue   : false,\n\t\t\t\tshowPopup    : false,\n\t\t\t\tshowSubPopup : false,\n\t\t\t\ttabs:\n\t\t\t\t[\n\t\t\t\t\t{ name: this.$t('upload'), active: true },\n\t\t\t\t\t{ name: this.$t('upload_by_link'), active: false },\n\t\t\t\t],\n\t\t\t\tactiveTab: this.$t('upload'),\n\t\t\t\tlink: '',\n\t\t\t\tpercentUploadOfProgress : 0,\n\t\t\t\tisUploading             : false,\n\t\t\t\tcancelToken             : null,\n\t\t\t};\n\t\t},\n\t\tcomputed:\n\t\t{\n\t\t\tcountFiels()\n\t\t\t{\n\t\t\t\tvar count = 0;\n\n\t\t\t\tif(!this.localValue)\n\t\t\t\t\treturn count;\n\n\t\t\t\tfor(var index in this.localValue)\n\t\t\t\t{\n\t\t\t\t\tif(!this.localValue[index].noShow)\n\t\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\treturn count;\n\t\t\t},\n\t\t\tfieldCode()\n\t\t\t{\n\t\t\t\tif(typeof this.fieldSettings.fieldCode !== 'undefined')\n\t\t\t\t\treturn this.fieldSettings.fieldCode;\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\ttableCode()\n\t\t\t{\n\t\t\t\tif(typeof this.fieldSettings.tableCode !== 'undefined')\n\t\t\t\t\treturn this.fieldSettings.tableCode;\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\t/**\n\t\t\t * Загрузить изображение\n\t\t\t */\n\t\t\tasync uploadFile(type)\n\t\t\t{\n\t\t\t\tif(!this.localValue)\n\t\t\t\t\tthis.$set(this, 'localValue', []);\n\n\t\t\t\tlet formData   = new FormData();\n\n\t\t\t\tformData.append('tableCode', this.tableCode);\n\t\t\t\tformData.append('fieldCode', this.fieldCode);\n\n\t\t\t\tif(type == 'link')\n\t\t\t\t{\n\t\t\t\t\tformData.append('typeUpload', 'link');\n\t\t\t\t\tformData.append('link', this.link);\n\t\t\t\t}\n\t\t\t\telse if(type == 'file')\n\t\t\t\t{\n\t\t\t\t\tif (typeof this.$refs.emFile == 'undefined' || this.$refs.emFile.length == 0)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tfor(var file of this.$refs.emFile.files)\n\t\t\t\t\t\tformData.append(`${this.fieldCode}[]`, file);\n\n\t\t\t\t\tformData.append('typeUpload', 'file');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn;\n\n\t\t\t\tif(this.view == 'table')\n\t\t\t\t\tformData.append('prepareForSave', true);\n\n\t\t\t\tthis.cancelToken = axios.CancelToken.source();\n\n\t\t\t\tthis.setUploadProgressStatus(true);\n\t\t\t\tlet result = await axios({\n\t\t\t\t\tmethod           : 'POST',\n\t\t\t\t\tdata             : formData,\n\t\t\t\t\theaders          : { 'Content-Type': 'multipart/form-data' },\n\t\t\t\t\turl              : '/field/em_file/index/upload/',\n\t\t\t\t\tcancelToken      : this.cancelToken.token,\n\t\t\t\t\tonUploadProgress : (e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.updateUploadProgress({ loaded: e.loaded, total: e.total });\n\t\t\t\t\t},\n\t\t\t\t}).catch(err =>\n\t\t\t\t{\n\t\t\t\t\tif (err.__proto__.__CANCEL__)\n\t\t\t\t\t\treturn { data: {\n\t\t\t\t\t\t\tsuccess: false,\n\t\t\t\t\t\t\tmessage: err.message,\n\t\t\t\t\t\t}};\n\t\t\t\t});\n\t\t\t\tthis.setUploadProgressStatus(false);\n\n\t\t\t\tif(!result.data.success)\n\t\t\t\t{\n\t\t\t\t\tthis.ElMessage.error(result.data.message);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tfor(var newFile of result.data.value)\n\t\t\t\t\tthis.localValue.push(newFile);\n\n\t\t\t\tthis.sendValue();\n\t\t\t\tthis.closeSubPopup();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * (де)активирует отображение процесса загрузки\n\t\t\t */\n\t\t\tsetUploadProgressStatus(active)\n\t\t\t{\n\t\t\t\tthis.clearUploadProgress();\n\t\t\t\tthis.$set(this, 'isUploading', !!active);\n\t\t\t},\n\t\t\t/**\n\t\t\t * обновляет отображение загрузки\n\t\t\t */\n\t\t\tupdateUploadProgress({ percent = 0, loaded = 0, total = 0 })\n\t\t\t{\n\t\t\t\tif (!percent && total)\n\t\t\t\t\tpercent = Math.floor((loaded * 100) / total);\n\n\t\t\t\tif (percent < 0)\n\t\t\t\t\tthis.$set(this, 'percentUploadOfProgress', 0);\n\t\t\t\telse if (percent > 100)\n\t\t\t\t\tthis.$set(this, 'percentUploadOfProgress', 100);\n\t\t\t\telse\n\t\t\t\t\tthis.$set(this, 'percentUploadOfProgress', percent);\n\t\t\t},\n\t\t\t/**\n\t\t\t * очищает прогресс загрузки\n\t\t\t */\n\t\t\tclearUploadProgress()\n\t\t\t{\n\t\t\t\tthis.$set(this, 'percentUploadOfProgress', 0);\n\t\t\t},\n\t\t\t/**\n\t\t\t * отмена загрузки\n\t\t\t */\n\t\t\tasync cancelUpload()\n\t\t\t{\n\t\t\t\tif (this.cancelToken)\n\t\t\t\t{\n\t\t\t\t\tconst result = await this.cancelToken.cancel(this.$t('fieldEmFile.uploading_canceled_by_the_user'));\n\t\t\t\t\tthis.cancelToken = null;\n\t\t\t\t}\n\t\t\t\tthis.clearUploadProgress();\n\t\t\t},\n\t\t\t/**\n\t\t\t * Удалить файл\n\t\t\t */\n\t\t\tasync removeFile(index)\n\t\t\t{\n\t\t\t\tif(typeof this.localValue[index].new != 'undefined')\n\t\t\t\t{\n\t\t\t\t\tthis.$delete(this.localValue, index);\n\t\t\t\t\tthis.sendValue();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.$set(this.localValue[index], 'delete', true);\n\t\t\t\tthis.$set(this.localValue[index], 'noShow', true);\n\n\t\t\t\tthis.sendValue();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Отправить измененное значение родителю\n\t\t\t */\n\t\t\tsendValue(newValue)\n\t\t\t{\n\t\t\t\tthis.$emit('onChange', {\n\t\t\t\t\tvalue     : this.localValue,\n\t\t\t\t\tsettings  : this.fieldSettings,\n\t\t\t\t\ttableCode : this.tableCode,\n\t\t\t\t\tfieldCode : this.fieldCode\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Установить превью для url\n\t\t\t */\n\t\t\tsetPreviewForImage(url, index)\n\t\t\t{\n\t\t\t\tif(url.match(/\\.(jpeg|jpg|gif|png)$/) == null)\n\t\t\t\t\turl = false;\n\n\t\t\t\tthis.setPreview(url, index);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Установать превью\n\t\t\t */\n\t\t\tsetPreview(url, index)\n\t\t\t{\n\t\t\t\tvar item = this.localValue[index];\n\n\t\t\t\titem.type  = (url == false) ? 'no-image' : 'image';\n\t\t\t\titem.sizes = {\n\t\t\t\t\tsmall: {\n\t\t\t\t\t\tpath: url\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.$set(this.localValue, index, item);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Задать активность табу\n\t\t\t */\n\t\t\tsetActiveTab(tab)\n\t\t\t{\n\t\t\t\tif (this.isUploading) return false;\n\t\t\t\tfor (var item of this.tabs)\n\t\t\t\t\titem.active = false;\n\n\t\t\t\ttab.active = true;\n\t\t\t\tthis.activeTab = tab.name;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Закрыть/Открыть попап\n\t\t\t */\n\t\t\topenPopup()\n\t\t\t{\n\t\t\t\tthis.showPopup = true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Закрыть/Открыть попап\n\t\t\t */\n\t\t\topenSubPopup()\n\t\t\t{\n\t\t\t\tthis.showSubPopup = true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Закрыть попап\n\t\t\t */\n\t\t\tclosePopup()\n\t\t\t{\n\t\t\t\tthis.showPopup = false;\n\t\t\t\tthis.closeSubPopup();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Закрыть попап\n\t\t\t */\n\t\t\tcloseSubPopup()\n\t\t\t{\n\t\t\t\tthis.showSubPopup = false;\n\t\t\t},\n\t\t},\n\t\twatch:\n\t\t{\n\t\t\t/**\n\t\t\t * Отслеживать изменение значения у родителя\n\t\t\t */\n\t\t\t'fieldValue'(newValue)\n\t\t\t{\n\t\t\t\tthis.localValue = newValue;\n\t\t\t},\n\t\t},\n\t\t/**\n\t\t * Функция создания компонента\n\t\t */\n\t\tcreated()\n\t\t{\n\t\t\tthis.localValue = this.fieldValue;\n\t\t},\n\t};\n</script>\n<style lang=\"scss\">\n\t.em-file-item-col\n\t{\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\talign-items: center;\n\t\tposition: absolute;\n\t\tleft:0px;\n\t\ttop:0px;\n\t\theight: 100%;\n\t\twidth:100%;\n\t\tpadding-left:10px;\n\t\tcursor: pointer;\n\t}\n\t.detail-field-box .em-file-item-col{padding-left:0px;}\n\t.em-file-item-wrapper\n\t{\n\t\twidth: 14px;\n\t\theight: 14px;\n\t\tmargin-right: 3px;\n\t\tcursor: pointer;\n\t\timg\n\t\t{\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tobject-fit: cover;\n\t\t}\n\t\tsvg\n\t\t{\n\t\t\twidth:100%;\n\t\t\theight:100%;\n\t\t\tfill: #677387;\n\t\t}\n\t}\n\t.em-file__upload-popup\n\t{\n\t\tbackground: #FFFFFF;\n\t\tborder: 1px solid rgba(103, 115, 135, 0.1);\n\t\tbox-shadow: 0px 4px 6px rgba(200, 200, 200, 0.25);\n\t\tborder-radius: 2px;\n\t\twidth: 326px;\n\t\tposition: absolute;\n\t\tpadding-top:5px;\n\t\tz-index: 5;\n\t    top:calc(100% + 5px);\n\t    left: 50%;\n\t    margin-left:-163px;\n\t}\n\t.em-file__upload-tab-item\n\t{\n\t\tfont-size: 10px;\n\t\tcolor: rgba(25, 28, 33, 0.7);;\n\t\tpadding: 0 6px;\n\t\theight: 25px;\n\t\tline-height: 25px;\n\t\tmargin-right: 8px;\n\t\tborder-bottom: 2px solid transparent;\n\t\tcursor: pointer;\n\t\t&:last-child {margin-right: unset; }\n\t\t&.active {border-bottom: 2px solid #191C21; color: #191C21; }\n\t}\n\t.em-file__upload-tabs-head\n\t{\n\t\tdisplay: flex;\n\t\theight: 25px;\n\t\talign-items: center;\n\t\tborder-bottom: 2px solid rgba(103, 115, 135, 0.1);\n\t}\n\t.em-file__upload-tab-wrapper {padding: 0 9px; }\n\t.em-file__upload-tabs-content-wrapper\n\t{\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t.em-file__link-tab{width:255px;margin:0 auto; text-align: right; padding:22px 0;}\n\t.em-file__embed-input {width:255px; margin-bottom: 10px;}\n\t.em-file\n\t{\n\t\twidth: 0.1px;\n\t\theight: 0.1px;\n\t\topacity: 0;\n\t\toverflow: hidden;\n\t\tposition: absolute;\n\t\tz-index: -1;\n\t}\n\t.em-file__file-tab{padding:22px 0; }\n\n\t.em-file__edit\n\t{\n\t\tposition: absolute;\n\t\ttop:-5px;\n\t\tleft:-5px;\n\t\twidth:calc(100% + 10px);\n\t\tmin-width: 169px;\n\t\tmin-height: 60px;\n\t\tbackground: #fff;\n\t\tpadding-left:10px;\n\t\tz-index: 1;\n\t\tborder-radius: 2px;\n\t\tbox-shadow: 0px 4px 6px rgba(200, 200, 200, 0.25);\n\t\tborder: 1px solid rgba(103, 115, 135, 0.1);\n\t\tpadding-bottom:10px;\n\t}\n\t.em-file__empty-pop{height: 50px;line-height: 50px;}\n\t.em-file__edit-item\n\t{\n\t\tpadding:7px 0;\n\t\tdisplay: flex;\n\t\tword-break: break-word;\n\t\talign-items: center;\n\t\ta{\n\t\t    color: rgba(25, 28, 33, 0.4);\n\t\t    text-decoration: none;\n\t\t    font-size: 12px;\n\t\t    margin-right:5px;\n\t\t    &:hover{text-decoration: underline;}\n\t\t}\n\t}\n\t.em-file__edit-attach\n\t{\n\t\twidth:25px;\n\t\theight: 25px;\n\t\tmargin-right: 10px;\n\t\tborder:1px solid rgba(103, 115, 135, 0.3);\n\t\tborder-radius: 2px;\n\t\tfill:rgba(103, 115, 135, 0.3);\n\t}\n\t.em-file__progress-tab\n\t{\n\t\twidth: 100%;\n\t\tpadding: 25px 12px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbutton { margin-left: auto; }\n\t}\n\t.em-file__progressbar\n\t{\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tbackground-color: rgba(103, 115, 135, 0.1);\n\t\theight: 20px;\n\t\tmargin-bottom: 18px;\n\t\toverflow: hidden;\n\t}\n\t.em-file__progressbar-text\n\t{\n\t\tfont-size: 8px;\n\t\tline-height: 11px;\n\t\tposition: absolute;\n\t\tleft: 7px;\n\t\ttop: 5px;\n\t}\n\t.em-file__progressbar-done\n\t{\n\t\theight: 100%;\n\t\tbackground-color: rgba(103, 115, 135, 0.1);\n\t\ttransition: width 0.5s ease-out;\n\t}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Field.vue?vue&type=template&id=5c120c48\"\nimport script from \"./Field.vue?vue&type=script&lang=js\"\nexport * from \"./Field.vue?vue&type=script&lang=js\"\nimport style0 from \"./Field.vue?vue&type=style&index=0&id=5c120c48&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=style&index=0&id=5c120c48&prod&lang=scss\"","'use strict';\n// B.2.3.11 String.prototype.small()\nrequire('./_string-html')('small', function (createHTML) {\n  return function small() {\n    return createHTML(this, 'small', '', '');\n  };\n});\n"],"sourceRoot":""}